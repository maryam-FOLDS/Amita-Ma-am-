<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday!</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Roboto:wght@400;700&family=Satisfy&display=swap" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: 'Roboto', sans-serif;
            color: white;
            background-color: #000;
        }

        .interface {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            box-sizing: border-box;
            padding: 20px;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 1;
            transition: opacity 0.5s ease-in-out;
        }

        .hidden {
            display: none;
            opacity: 0;
        }

        /* Interface 1: Universe Theme */
        #interface1 {
            background-color: #000000;
            background-image:
                radial-gradient(1px 1px at 20px 30px, #eee, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 40px 70px, #fff, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 50px 160px, #ddd, rgba(0,0,0,0)),
                radial-gradient(1.5px 1.5px at 90px 40px, #fff, rgba(0,0,0,0)),
                radial-gradient(1.5px 1.5px at 160px 120px, #ddd, rgba(0,0,0,0)),
                linear-gradient(to bottom, #020107 0%, #0a0d3d 50%, #1c133a 100%);
            z-index: 30;
        }

        #moon {
            width: 100px;
            height: 100px;
            background-color: #f8c3d0;
            border-radius: 50%;
            box-shadow: 0 0 20px #f8c3d0, 0 0 40px #f8c3d0, 0 0 60px #f8c3d0;
            cursor: pointer;
            transition: transform 0.2s ease-in-out;
            z-index: 10;
        }
        #moon:active {
            transform: scale(0.95);
        }

        #interface1-text {
            margin-top: 30px;
            font-family: 'Dancing Script', cursive;
            font-size: 3em;
            color: #f0e6ef;
            text-shadow: 1px 1px 5px rgba(0,0,0,0.5), 0 0 10px #f8c3d0;
            z-index: 10;
        }

        /* Glow Interface */
        #glow-interface {
            z-index: 20;
        }
        #glowing-moon-img {
            max-width: 90%;
            max-height: 90vh;
            object-fit: contain; /* Use contain to ensure full image is visible, or cover for filling */
            border-radius: 15px; /* Changed from 50% for rectangular image */
            animation: pulseGlow 2s infinite alternate;
        }

        @keyframes pulseGlow {
            from {
                box-shadow: 0 0 20px #fff, 0 0 30px #f0e6ef, 0 0 40px #e1bee7;
            }
            to {
                box-shadow: 0 0 30px #fff, 0 0 45px #f0e6ef, 0 0 60px #d1c4e9;
            }
        }

        /* Interface 2: Message Display */
        #interface2 {
            z-index: 10;
        }

        #photo-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://github.com/maryam-FOLDS/Amita-Ma-am-/blob/main/IMG_20250906_185520.jpg?raw=true'); /* Updated Image */
            background-size: cover;
            background-position: center;
            transition: filter 1s ease-in-out;
            filter: blur(0px);
            z-index: -1;
        }
        #photo-bg.blurred {
            filter: blur(8px);
        }

        #message-container { /* Renamed from typewriter-container */
            background-color: rgba(0, 0, 0, 0.7);
            padding: 25px;
            border-radius: 15px;
            max-width: 85%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            z-index: 1;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }
        #message-container.visible {
            opacity: 1;
        }

        #full-message-text { /* Renamed from typewriter-text */
            font-family: 'Satisfy', cursive;
            font-size: 1.6em;
            line-height: 1.7;
            white-space: pre-wrap;
            color: #f5f5f5;
            text-align: left;
        }

        /* Final Popup */
        #final-popup {
            z-index: 1000;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            background-color: rgba(0, 0, 0, 0.3);
        }

        #final-popup-content {
            background-color: rgba(26, 26, 46, 0.85);
            padding: 30px 40px;
            border-radius: 15px;
            font-family: 'Roboto', sans-serif;
            font-size: 2em;
            color: #ffc2d1;
            text-shadow: 1px 1px 4px #000;
            box-shadow: 0 0 30px rgba(255,194,209,0.5);
            animation: beat 1.5s infinite;
        }

        @keyframes beat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            #interface1-text { font-size: 2.5em; }
            #message-container { max-width: 90%; padding: 20px; }
            #full-message-text { font-size: 1.3em; line-height: 1.6; }
            #final-popup-content { font-size: 1.5em; padding: 20px 30px; }
        }
         @media (max-width: 480px) {
            #interface1-text { font-size: 2.2em; }
            #moon { width: 80px; height: 80px; }
            #message-container { max-width: 95%; padding: 15px; }
            #full-message-text { font-size: 1.1em; line-height: 1.5; }
            #final-popup-content { font-size: 1.2em; padding: 15px 20px; }
        }
    </style>
</head>
<body>

    <div id="interface1" class="interface">
        <div id="moon"></div>
        <p id="interface1-text">Happy birthday ma'am</p>
    </div>

    <div id="glow-interface" class="interface hidden">
        <img id="glowing-moon-img" src="https://github.com/maryam-FOLDS/Amita-Ma-am-/blob/main/IMG_20250906_185520.jpg?raw=true" alt="Happy Birthday Ma'am"> <!-- Updated Image -->
    </div>

    <div id="interface2" class="interface hidden">
        <div id="photo-bg"></div>
        <div id="message-container">
            <p id="full-message-text">
                Wishing our most respected Director Ma’am a very Happy Birthday. On this special day, I feel deeply grateful for the light you bring into our lives—not just through your vision and leadership, but through the warmth of your heart. You don’t just guide us, you nurture us, like a teacher who sees the best in every student. Under your care, our school feels like a family where we are encouraged to dream, to learn, and to grow with confidence. Your kindness, patience, and strength inspire us every single day. May this year bless you with endless joy, good health, and all the love that you so selflessly give to others. Truly, you are not only the pride of our school, but also a blessing in each of our lives.
            </p>
        </div>
    </div>

    <div id="final-popup" class="interface hidden">
        <div id="final-popup-content">
            Once again happy birthday ma'am
        </div>
    </div>

    <audio id="birthdayAudio" src="https://github.com/maryam-FOLDS/Amita-Ma-am-/blob/main/AUD-20250906-WA0053.mp4?raw=true" preload="auto" volume="1.0"></audio>

    <script>
        // DOM Elements
        const interface1 = document.getElementById('interface1');
        const glowInterface = document.getElementById('glow-interface');
        const interface2 = document.getElementById('interface2');
        const moon = document.getElementById('moon');
        const birthdayAudio = document.getElementById('birthdayAudio');
        const photoBg = document.getElementById('photo-bg');
        const messageContainer = document.getElementById('message-container');
        const finalPopup = document.getElementById('final-popup');

        // Timings and Settings
        const GLOW_DURATION = 2000; // 2 seconds
        const PHOTO_VIEW_DURATION = 5000; // 5 seconds for the photo to be visible
        const BLUR_AND_MESSAGE_DELAY = 1000; // Delay for message to appear after blur starts (gives blur time to apply)
        const MESSAGE_DISPLAY_DURATION = 8000; // How long the message is visible before final popup
        let audioPlayed = false; // Flag to ensure audio plays only once

        // Event listener for the moon click
        moon.addEventListener('click', () => {
            // 1. Hide Interface 1, Show Glow Interface
            interface1.style.opacity = '0';
            glowInterface.classList.remove('hidden');
            setTimeout(() => interface1.classList.add('hidden'), 500);

            // 2. After GLOW_DURATION, transition to Interface 2
            setTimeout(() => {
                glowInterface.style.opacity = '0';
                interface2.classList.remove('hidden');
                setTimeout(() => glowInterface.classList.add('hidden'), 500);

                // 3. After PHOTO_VIEW_DURATION, blur photo and show message
                setTimeout(() => {
                    photoBg.classList.add('blurred'); // Start blurring

                    setTimeout(() => {
                        messageContainer.classList.add('visible'); // Show the full message
                    }, BLUR_AND_MESSAGE_DELAY); // Give blur a head start

                    // 4. After message display duration, show final popup AND play audio
                    setTimeout(() => {
                        finalPopup.classList.remove('hidden');
                        if (!audioPlayed) {
                            birthdayAudio.play().then(() => {
                                audioPlayed = true;
                            }).catch(error => {
                                console.error("Audio play failed. User interaction might be required to enable audio playback:", error);
                                // This is a common browser restriction. On many browsers,
                                // audio cannot autoplay without a direct user interaction
                                // that specifically triggers the audio. The initial click
                                // on the moon sometimes isn't sufficient for later audio playback.
                                // You might consider a small "Click here to play audio" button
                                // on the final popup if this issue persists for users.
                            });
                        }
                    }, PHOTO_VIEW_DURATION + BLUR_AND_MESSAGE_DELAY + MESSAGE_DISPLAY_DURATION);

                }, PHOTO_VIEW_DURATION);

            }, GLOW_DURATION);
        });
    </script>

</body>
</html>